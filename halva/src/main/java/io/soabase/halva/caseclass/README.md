### Case Classes and Case Objects

NOTE: If you are not familiar with Scala's Case Classes and Case Objects you should review [Scala for Java Programmers](../../../../../../../../SCALA.md) first.

------------

Case Classes and Case Objects are generated by the Halva Annotation Processor. You declare an interface that describes the class and the Halva processor 
generates the class during normal javac compilation (you may need to [enable Java Annotation processing](../../../../../../../../IDEs.md) in your IDE/build tool).

Halva generated Case Classes are deeply integrated into the rest of the library and are a key component in [For Comprehensions](../comprehension/README.md) and [Matching and Extracting](../matcher/README.md).

#### Quick Start for Case Classes

Turn this:

```java
@CaseClass
public interface Example {
    String firstName();
    String lastName();
    int age();
    boolean active();
    List<Date> importantDates();
}
```

... into a complete **Scala-style case class** with **accessors**, a complete **Builder/Factory**, **default values**, **`equals()`**, **`hashCode()`**, **`toString()`** and **`copy()`**. The generated class for the above is here:

> [ExampleCase.java](https://github.com/Randgalt/halva/blob/master/examples/example-generated/ExampleCase.java)

Then you can use it ala:

```java
ExampleCase myExample = ExampleCase("John", "Galt", 42);
```

#### Copies

Make a copy with field changes ala:

```java
ExampleCase copy = myExample.copy().active(true).build();
```
#### Default Values

Where possible, CaseClass fields are given a default value. However, you can specify the default value for each field by 
using a default method. E.g.

```java
@CaseClass
public interface Example {
    default String name() {
        return "John";
    }
}
```

If the `name()` method in the builder is not used when building the case class, the name will get the default value of "John".

### Reference

Case classes and case objects are generated from a specification interface. The interface may extend other interfaces as needed. The interface can contain any combination of fields, methods, etc. For case classes the annotation processor will notice methods in the interface that conform to _case class fields_ and generate fields in the case class for them. These are no-arg methods that return a value. E.g. `String name();`. Case objects do not have fields. Add a default implementation to the case class field members to provide a custom [default value for the field](#default-values).

**Naming**

The name of the generated class will be *OriginalName*Case. However, if you were to name the annotated source interface ending with an underscore `_`, the generated class wouild be named _OriginalName_ (i.e. the original name minus the underscore). You can change these defaults with the CaseClass/CaseObject attributes suffix() and unsuffix().

**Mutable/Immutable**

By default, all generated case class fields are immutable and only getter methods are generated. You can mark a method in the source interface with `@CaseClassMutable` to make that field mutable. E.g.

```
@CaseClass interface Foo {
    String name(); // immutable
    @CaseClassMutable int age(); // mutable
}
```

**Ignore Fields**

You can instruct the annotation processor to not generate a field for a method in the interface that looks like a _case class field_ by marking it with `@CaseClassIgnore`. E.g.

```
@CaseClass interface Foo {
    String name(); // field generated
    @CaseClassIgnore int getCurrentTime(); // field not generated
}
```

**Serialization**

The generated case classes implement `Serializable` so they can be used with standard JDK serialization. If you'd like to use Jackson for JSON serialization, set the optional attribute `json` to true.

```java
@CaseClass(json = true)
public interface Example {
    String name();
}
```

**Case Objects**

Case objects are created just like case classes except you use the `@CaseObject` annotation instead. Additionally, case objects cannot contain any *case class field*s. The generated class is a singleton and the annotation processor generates a public static final field that has the singleton instance. Becauase a static instance is generated, any declared methods must have a default implementation. E.g.

```java
@CaseObject
public interface Example {
    default String name() {
        return "John Galt";
    }
}
```

You would then use the object like this:

```java
import static your.package.Example.Example;

...

System.out.println(ExampleCase.name());
```

**Case Class Features**

Every generated case class gets the following methods/features:

* A generated field for every *case class field* in the source interface.
* Default value for every field - [custom defaults](#default-values) can be specified.
* Accessor method with the same name as the field. E.g. if the field in the source interface was "name", the generated accessor would be:
    * `public String name() { return name; }`
* Optional setter method when `@CaseClassMutable` is used. The setter has the same name as the source interface method. E.g. 
    * `public void name(String newName){ this.name = newName; }`
* A copy method for generating a copy of a case class instance and changing one or more fields. See [copies](#copies) above.
* A sugared static constructor that works in the same manner as Scala companion objects.
    * E.g. Given `@CaseClass public interface Person{String name(); int age();}`
    * You can instantiate an instance by:
        * `import static my.package.PersonCase.PersonCase`
        * `PersonCase p = PersonCase("John Galt", 42);`
* Generated `equals(Object)`, `hashCode()`, `toString()`, `debugString()`
* A static `ClassTuple` generator method for use with [For Comprehensions](../comprehension/README.md) and [Matching and Extracting](../matcher/README.md).
* The generated class implements `Tuplable` so that it can be "unapplied" for [For Comprehensions](../comprehension/README.md) and [Matching and Extracting](../matcher/README.md).
* A complete Builder factory for building instances using a fluent interface. E.g.
    * ```PersonCase p = PersonCase.builder().name("John Galt").age(42).build();```
